(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ee7840e"],{3882:function(e,a,t){"use strict";t.r(a);var c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.loaded?t("Page",{attrs:{pageId:e.spaceInfo.homePageId}}):t("div",{class:{"space-loading":!0,"no-header":e.isNoHeader(e.$route),"is-mobile":e.isMobile}},[t("ten-loading",{attrs:{type:"block"}})],1)},n=[],s=t("1da1"),r=t("5530"),o=(t("96cf"),t("ac1f"),t("5319"),t("fb6a"),t("2f62")),i=t("9f13"),u=t("726d"),p=t("14f4"),d=t("de80"),f=t("f688"),m=t("b035"),y={props:["spaceKey"],components:{Page:u["default"]},data:function(){return{mounted:!0,loaded:!1,isMobile:Object(f["a"])()}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["d"])("space",["spaceInfo"])),Object(o["d"])("user",["userInfo"])),Object(o["d"])("common",["iframeDomain"])),Object(o["c"])("common",["isNoHeader"])),Object(o["c"])("space",["canViewSpace","canManageSpace","isGraySpaceByKey"])),{},{title:function(){return this.spaceInfo.spaceName}}),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])("space",["getSpaceInfo","getGraySpaceInfo","getGraySpacePermission","resetSpace","setLastKey","updateSpaceInfo"])),{},{initCur:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.getSpaceInfo({spaceKey:e.spaceKey}).catch((function(e){return e}));case 3:if(t=a.sent,t.spaceKey){a.next=16;break}if(404===t.statusCode){a.next=7;break}throw t;case 7:return a.next=9,m["q"](e.spaceKey).catch((function(e){return e}));case 9:if(c=a.sent,!c.spaceKey){a.next=12;break}throw{statusCode:i["a"].NOT_PERMISSION};case 12:if(!/^~/.test(e.spaceKey)){a.next=15;break}return e.$router.replace({name:"userAdmin",params:{username:e.spaceKey.slice(1)}}),a.abrupt("return");case 15:throw t;case 16:if(t.homePageId){a.next=19;break}throw d["a"].$emit(i["c"].TOGGLE_SIDEBAR,{render:!1}),{statusCode:i["a"].NOT_PERMISSION};case 19:e.loaded=!0,Object(p["a"])("show_space",{space_key:e.spaceKey,hostValue:e.iframeDomain}),a.next=27;break;case 23:a.prev=23,a.t0=a["catch"](0),console.error(a.t0),e.mounted&&(d["a"].$emit(i["c"].LOAD_FAIL,a.t0),(null===a.t0||void 0===a.t0?void 0:a.t0.statusCode)===i["a"].NOT_PERMISSION&&Object(p["a"])("show_space_unauthorized",{space_key:e.spaceKey,hostValue:e.iframeDomain}));case 27:case"end":return a.stop()}}),a,null,[[0,23]])})))()},initGray:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["q"](e.spaceKey).catch((function(e){return e}));case 3:if(t=a.sent,t.spaceKey){a.next=6;break}throw{statusCode:i["a"].NOT_FOUND};case 6:return e.spaceKey!==e.spaceInfo.spaceKey&&(e.resetSpace(),e.setLastKey({spaceKey:e.spaceKey})),a.next=9,e.getGraySpacePermission({spaceKey:e.spaceKey,spaceId:t.spaceId});case 9:return a.next=11,e.getGraySpaceInfo({spaceKey:e.spaceKey}).catch((function(){e.mounted&&e.updateSpaceInfo(t)}));case 11:if(e.canViewSpace){a.next=13;break}throw e.canManageSpace?{statusCode:i["a"].CAN_NOT_VIEW}:{statusCode:i["a"].NOT_PERMISSION};case 13:e.loaded=!0,Object(p["a"])("show_space",{space_key:e.spaceKey,hostValue:e.iframeDomain}),a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](0),console.error(a.t0),e.mounted&&(d["a"].$emit(i["c"].LOAD_FAIL,a.t0),(null===a.t0||void 0===a.t0?void 0:a.t0.statusCode)===i["a"].NOT_PERMISSION&&Object(p["a"])("show_space_unauthorized",{space_key:e.spaceKey,hostValue:e.iframeDomain}));case 21:case"end":return a.stop()}}),a,null,[[0,17]])})))()},init:function(){this.isGraySpaceByKey(this.spaceKey)?this.initGray():this.initCur()}}),mounted:function(){this.init()},destroyed:function(){this.mounted=!1}},h=y,b=(t("4346"),t("2877")),l=Object(b["a"])(h,c,n,!1,null,"7865af19",null);a["default"]=l.exports},4346:function(e,a,t){"use strict";t("7c26")},"7c26":function(e,a,t){}}]);